name: ChatOps Help
on:
  repository_dispatch:
    types: [help-command]
permissions:
  issues: write
  pull-requests: write
jobs:
  help:
    runs-on: ubuntu-latest
    steps:
      - name: Respond with Help
        uses: peter-evans/create-or-update-comment@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          repository: ${{ github.event.client_payload.github.payload.repository.full_name }}
          issue-number: ${{ github.event.client_payload.github.payload.issue.number }}
          body: |
            ## ðŸ¤– Prow ChatOps Commands
            
            | Command | Usage | Description |
            |---------|-------|-------------|
            | `/lgtm` | `/lgtm` | Applies the `lgtm` label to a PR. |
            | `/label` | `/label [label]` | Adds a label (see `.prowlabels.yaml`). |
            | `/remove-label` | `/remove-label [label]` | Removes a label. |
            | `/assign` | `/assign @user` | Assigns the issue/PR to a user. |
            | `/unassign` | `/unassign @user` | Unassigns a user. |
            | `/retest` | `/retest` | Triggers CI tests for the current commit. |
            | `/close` | `/close` | Closes the issue/PR. |
            | `/reopen` | `/reopen` | Reopens the issue/PR. |
            | `/lock` | `/lock` | Locks the conversation. |
            | `/cc` | `/cc @user` | Requests review from a user. |
